<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ page import="java.text.SimpleDateFormat"%>
<%@ page import="java.util.Date"%>

<div class="col-span-12 lg:col-span-3 2xl:col-span-2">
    <!-- BEGIN: Menu -->
    <div class="intro-y box bg-primary p-4 mt-0 text-lg">
    	<nav class="side-nav pt-1">
		    <ul>
		        <li class="mb-4">
		            <a id="btnNew" href="javascript:;" class="side-menu btn btn-outline-primary shadow-md font-bold zoom-in"
		            	style="letter-spacing: 1px;font-size: 19px;color:rgb(30, 58, 138);background-color: white;">
		                새 결재 진행
		            </a>
		        </li>
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="home" data-lucide="home" class="lucide lucide-home"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path></svg></div>
		                <div class="side-menu__title"> 내 문서함 </div>
		            </a>
		        </li>
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 상신함 </div>
		            </a>
		        </li>
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 진행중 </div>
		            </a>
		        </li>
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 완료함 </div>
		            </a>
		        </li>
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 반려함 </div>
		            </a>
		        </li>
		        <hr style="width: 95%; margin-top: 7%; margin-bottom: 7%" />
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 미결함 </div>
		            </a>
		        </li>
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 예결중 </div>
		            </a>
		        </li>
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 대결함 </div>
		            </a>
		        </li>
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 기결함 </div>
		            </a>
		        </li>
		        <hr style="width: 95%; margin-top: 7%; margin-bottom: 7%" />
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 수신함 </div>
		            </a>
		        </li>
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 참조함 </div>
		            </a>
		        </li>
		        <hr style="width: 95%; margin-top: 7%; margin-bottom: 7%" />
		        <li>
		            <a href="" class="side-menu">
		                <div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="box" data-lucide="box" class="lucide lucide-box"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></div>
		                <div class="side-menu__title"> 임시보관함 </div>
		            </a>
		        </li>
		    </ul>
		</nav>
    </div>
    <!-- END: Menu -->
</div>
<!-- BEGIN: Body -->
<div class="bdy col-span-12 lg:col-span-9 2xl:col-span-10">


<div class="go_content go_renew" id="content">
	<div class="mt-2 mb-10">
		<span class="font-extrabold text-3xl" title="${docFormSj}">${docFormSj}</span>
	</div>
	<!-- 결재문서 상세-->
	<div class="content_page report_detail w-full">
		<!-- BEGIN : 툴바 -->
		<div class="tool_bar flex font-semibold text-lg w-full items-center border-b border-slate-300 pb-2 mb-2">
			<div class="flex items-center">
				<a id="act_draft" class="btn_tool flex mr-7 items-center zoom-in" data-role="button">
					<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="edit" data-lucide="edit" class="lucide lucide-edit block mx-auto"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
					<span class="txt ml-1">결재요청</span>
				</a>
				<a id="act_temp_save" class="btn_tool flex mr-7 items-center zoom-in" data-role="button">
					<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="save" data-lucide="save" class="lucide lucide-save block mx-auto"><path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
					<span class="txt ml-1">임시저장</span>
				</a>
				<a id="act_document_preview" class="btn_tool flex mr-7 items-center zoom-in" data-role="button">
					<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="eye" data-lucide="eye" class="lucide lucide-eye block mx-auto"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
					<span class="txt ml-1">미리보기</span>
				</a>
				<a id="act_cancel_draft" class="btn_tool flex mr-7 items-center zoom-in" data-role="button">
					<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="x-circle" data-lucide="x-circle" class="lucide lucide-x-circle block mx-auto"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
					<span class="txt ml-1">취소</span>
				</a>
				<a id="act_edit_apprflow" data-tw-toggle="modal" data-tw-target="#selectAtrzLine" class="btn_tool flex items-center zoom-in" data-role="button">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
					<span class="txt ml-1">결재정보</span>
				</a>
			</div>
			<div class="optional flex ml-auto items-center">
				<a id="act_list" href="/emp/atrz/mydoc" class="btn_tool flex items-center mr-3 zoom-in" data-role="button">
					<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="align-justify" data-lucide="align-justify" class="lucide lucide-align-justify block mx-auto"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
					<span class="txt ml-1">목록</span>
				</a>
				<select id="autoSaveSelect" class="form-control pl-2 h-9 text-lg" style="width: 142px;">
					<option value="0" selected="selected">자동저장 안함</option>
					<option value="30">자동저장(30초)</option>
					<option value="60">자동저장(1분)</option>
					<option value="180">자동저장(3분)</option>
				</select>
			</div>
		</div>
		<!-- END : 툴바 -->
		<div class="wrap_container">
			<!-- 3단 레이아웃 멀티클래스 -->
			<section class="content_wrapper">
				<!--전자결제 상세-->
				<div class="report_type approval_type">
					<div id="doc_wrap" class="flex">
						<!--전자결재 내용-->
						<div id="doc" class="approval_import ie9-scroll-fix box p-3 border-t border-b border-r border-l border-slate-200" style="width: 822px;">
							<!-- 문서 내용 표시 테스트 -->
							<form id="document_content" class="form_doc_editor editor_view font-semibold" onsubmit="return false;" style="width: 100%;">
								<table class="__se_tbl" style="background: white; border: 0px solid black; border-image: none; width: 800px; color: black; font-size: 16px; border-collapse: collapse !important;">
									<!-- Header -->
									<tbody>
										<tr>
											<td style="padding: 3px !important; border: 0px solid black; border-image: none; width: 300px; height: 90px !important; text-align: center; font-size: 22px; font-weight: bold; vertical-align: middle;"
												colspan="2" class="">연차신청서</td>
										</tr>
										<tr>
											<td style="padding: 0px !important; border: 0px currentColor; border-image: none; width: 300px;" class="">
												<table class="__se_tbl" style="background: white; margin: 0px; border: 1px solid black; border-image: none; color: black; font-size: 16px; border-collapse: collapse !important;">
													<tbody>
														<tr>
															<td style="background: rgb(221, 221, 221); padding: 0px !important; border: 1px solid black; border-image: none; width: 100px; height: 22px; text-align: center; font-weight: bold; vertical-align: middle;">
																	기안자</td>
															<td style="padding: 0px !important; border: 1px solid black; border-image: none; width: 200px; height: 22px; text-align: left; vertical-align: middle;">
																<input id="" name="" value="최수영" type="text"readonly="" style="vertical-align: middle; width: 100%; border: 0px; box-shadow: inset 0px 0px 0px rgba(150, 150, 150, 0.2)" />
															</td>
														</tr>
														<tr>
															<td style="background: rgb(221, 221, 221); padding: 0px !important; border: 1px solid black; border-image: none; width: 100px; height: 22px; text-align: center; font-weight: bold; vertical-align: middle;">
																기안부서</td>
															<td style="padding: 0px !important; border: 1px solid black; border-image: none; width: 200px; height: 22px; text-align: left; vertical-align: middle;">
																<input id="" name="" value="인사/행정" type="text" readonly="" style="vertical-align: middle; width: 100%; border: 0px; box-shadow: inset 0px 0px 0px rgba(150, 150, 150, 0.2)" />
															</td>
														</tr>
														<tr>
															<c:set var="ymd" value="<%=new java.util.Date()%>" />
															<td style="background: rgb(221, 221, 221); padding: 0px !important; border: 1px solid black; border-image: none; width: 100px; height: 22px; text-align: center; font-weight: bold; vertical-align: middle;">
																기안일</td>
															<td style="padding: 0px !important; border: 1px solid black; border-image: none; width: 200px; height: 22px; text-align: left; vertical-align: middle;">
																<input id="" name="" value="<fmt:formatDate value="${ymd}" pattern="yyyy-MM-dd" />" type="text" readonly="" style="vertical-align: middle; width: 100%; border: 0px; box-shadow: inset 0px 0px 0px rgba(150, 150, 150, 0.2)" />
															</td>
														</tr>
														<tr>
															<td style="background: rgb(221, 221, 221); padding: 0px !important; border: 1px solid black; border-image: none; width: 100px; height: 22px; text-align: center; font-weight: bold; vertical-align: middle;">
																문서번호</td>
															<td style="padding: 0px !important; border: 1px solid black; border-image: none; width: 200px; height: 22px; text-align: left; vertical-align: middle;">
																<input id="" name="" value="" type="text" readonly="" style="vertical-align: middle; width: 100%; border: 0px; box-shadow: inset 0px 0px 0px rgba(150, 150, 150, 0.2)" />
															</td>
														</tr>
													</tbody>
												</table>
											</td>
											<td id="atrz_line" class="flex justify-end" style="width: 800px; padding: 0px !important; border: 0px currentColor !important; border-image: none !important !important; width: 500px; text-align: right; vertical-align: top !important;" class="">
												<!-- BEGIN : 결재선 -->
<!-- 										    	<table class="__se_tbl text-center" style="height: 156px; background: white; margin: 0px; border: 1px solid black; border-image: none; color: black; font-size: 16px; border-collapse: collapse !important;"> -->
<!-- 										    		<tr id="atrz_line_tr_1"> -->
<!-- 										    			<td rowspan="3" class="font-semibold" style="width: 27px; border: 1px solid black; background: rgb(221, 221, 221); font-size: 16px;">결재</td> -->
<!-- 										    			<td style="height: 35px; width: 87px; border: 1px solid black;">관리소장</td> -->
<!-- 										    		</tr> -->
<!-- 										    		<tr> -->
<!-- 										    			<td style="height: 85px; width: 87px; border: 1px solid black;">이덕화</td> -->
<!-- 										    		</tr> -->
<!-- 										    		<tr> -->
<!-- 										    			<td style="height: 35px; width: 87px; border: 1px solid black;"></td> -->
<!-- 										    		</tr> -->
<!-- 										    	</table> -->
										    	<!-- END : 결재선 -->
											</td>
										</tr>
									</tbody>
								</table><br />
								<table class="__se_tbl" style="background: white; border: 1px solid black; border-image: none; width: 800px; color: black; font-size: 16px; margin-top: 0px; border-collapse: collapse !important;">
									<tbody>
										<tr>
											<td style="background: rgb(221, 221, 221); padding: 5px; border: 1px solid black; border-image: none; height: 25px; text-align: center; color: rgb(0, 0, 0); font-size: 16px; font-weight: bold; vertical-align: middle;">
												휴가&nbsp;종류</td>
											<td style="background: rgb(255, 255, 255); padding: 5px; border: 1px solid black; border-image: none; height: 25px; text-align: left; color: rgb(0, 0, 0); font-size: 16px; font-weight: normal; vertical-align: middle;">
												<span id="vacationTypeArea" style="line-height: normal; font-size: 11pt; margin-top: 0px; margin-bottom: 0px;" name="select">
													<select class="form-control h-8 w-20 text-lg pl-2" name="select_type">
														<option value="연차">연차</option>
														<option value="조퇴">조퇴</option>
														<option value="지각">지각</option>
														<option value="경조">경조</option>
														<option value="공가">공가</option>
														<option value="질병휴가">질병휴가</option>
													</select>
												</span>
											</td>
										</tr>
										<tr>
											<td style="background: rgb(221, 221, 221); padding: 5px; border: 1px solid black; border-image: none; height: 45px; text-align: center; color: rgb(0, 0, 0); font-size: 16px; font-weight: bold; vertical-align: middle;">
												기간&nbsp;및&nbsp;일시</td>
											<td class="flex items-center" style="background: rgb(255, 255, 255); padding: 1px; padding-left: 4px; border: 0px solid black; border-image: none; width: 700px; height: 45px; text-align: left; color: rgb(0, 0, 0); font-size: 12px; vertical-align: middle;">
												 <div class="relative" style="width: 155px;"><div class="absolute rounded-l w-9 h-full flex items-center justify-center bg-slate-100 border text-slate-500">
												     <i data-lucide="calendar" class="w-4 h-4"></i></div>
												     <input id="startDate" name="startDate" type="text" class="date_picker form-control pl-10 pr-0 h-full" data-single-mode="true" />
												 </div>&nbsp;~&nbsp;
												 <div class="relative" style="width: 155px;"><div class="absolute rounded-l w-9 h-full flex items-center justify-center bg-slate-100 border text-slate-500">
												     <i data-lucide="calendar" class="w-4 h-4"></i></div>
												     <input id="endDate" name="endDate" type="text" class="date_picker form-control pl-10 pr-0 h-full" data-single-mode="true" />
												 </div>&nbsp;&nbsp;
												<span id="usingPointArea" style="line-height: normal; font-size: 16px; margin-top: 0px; margin-bottom: 0px;">
													<b style="font-weight: bold; font-size: 15px;">사용일수 : </b>
													<input type="text" class="form-control w-10 h-full text-center font-bold mr-1 p-0" name="usingPoint" id="usingPoint"
														data-require="false" data-editable="true" value="" readonly="readonly" style="font-weight: bold; font-size: 16px;"/>
													<b id="usingPoint_Comment" style="font-weight: bold; color: red; font-size: 15px;"></b>
												</span>
											</td>
										</tr>
										<tr>
											<td style="background: rgb(221, 221, 221); padding: 5px; border: 1px solid black; border-image: none; height: 45px; text-align: center; color: rgb(0, 0, 0); font-size: 16px; font-weight: bold; vertical-align: middle;">
												반차&nbsp;여부</td>
											<td style="background: rgb(255, 255, 255); padding: 5px; border: 1px solid black; border-image: none; height: 45px; text-align: left; color: rgb(0, 0, 0); font-size: 16px; font-weight: normal; vertical-align: middle;">
												<span id="vacationHalfArea" style="line-height: normal; font-size: 16px; margin-top: 0px; margin-bottom: 0px;">
													<input id="startHalf" name="check_startHalf" class="form-check-input" type="checkbox" value="시작일">
													<label class="form-check-label ml-0 font-semibold" for="checkbox-switch-1">시작일</label>
														( <input id="startAMHalf" class="form-check-input" type="radio" name="radio_startHalf" value="오전">
														  <label class="form-check-label ml-0 font-semibold" for="radio-switch-1">오전</label>
														  <input id="startPMHalf" class="form-check-input" type="radio" name="radio_startHalf" value="오후">
														  <label class="form-check-label ml-0 font-semibold" for="radio-switch-2">오후</label> )
													<input id="endHalf" name="check_startHalf" class="form-check-input ml-3" type="checkbox" value="종료일">
													<label class="form-check-label ml-0 font-semibold" for="checkbox-switch-2">종료일</label>
														( <input id="endAMHalf" class="form-check-input" type="radio" name="radio_endHalf" value="오전">
														  <label class="form-check-label ml-0 font-semibold" for="radio-switch-3">오전</label>
														  <input id="endPMHalf" class="form-check-input" type="radio" name="radio_endHalf" value="오후">
														  <label class="form-check-label ml-0 font-semibold" for="radio-switch-4">오후</label> )
												</span>
											</td>
										</tr>
										<tr>
											<td style="background: rgb(221, 221, 221); padding: 5px; border: 1px solid black; border-image: none; height: 45px; text-align: center; color: rgb(0, 0, 0); font-size: 16px; font-weight: bold; vertical-align: middle;">
												연차&nbsp;일수</td>
											<td class="flex items-center" style="background: rgb(255, 255, 255); padding: 3px; border: 0px solid black; border-image: none; width: 700px; height: 45px; text-align: left; color: rgb(0, 0, 0); font-size: 16px; vertical-align: middle;">
												<span id="restPointArea" style="line-height: normal; font-size: 16px; margin-top: 0px; margin-bottom: 0px;">
													<b class="ml-2">잔여연차 : </b>
													<input type="text" class="form-control w-12 h-full text-center font-bold mr-2 p-0" name="restPoint" id="restPoint"
														data-require="false" data-editable="true" value="" readonly="readonly" style="font-weight: bold; font-size: 16px;" />
													<b id="restPoint_Comment" style="font-weight: bold; color: red"></b>
												</span>
												<span id="applyPointArea" style="line-height: normal; font-size: 16px; margin-top: 0px; margin-bottom: 0px;">
													<b>신청연차 : </b>
													<input type="text" class="form-control w-12 h-full text-center font-bold p-0" name="applyPoint" id="applyPoint"
														data-require="false" data-editable="true" value="" readonly="readonly" style="font-weight: bold; font-size: 16px;"/>
													<b id="applyPoint_Comment" style="font-weight: bold; color: red"></b>
												</span>
											</td>
										</tr>
										<tr>
											<td style="background: rgb(221, 221, 221); padding: 5px; border: 1px solid black; border-image: none; height: 80px; text-align: center; color: rgb(0, 0, 0); font-size: 14px; font-weight: bold; vertical-align: middle;">
												<b style="color: rgb(255, 0, 0);">*</b>&nbsp;휴가&nbsp;사유</td>
											<td style="background: rgb(255, 255, 255); padding: 3px; border: 1px solid black; border-image: none; width: 700px; height: 100px; text-align: left; color: rgb(0, 0, 0); font-size: 12px; vertical-align: top;">
												<textarea id="editor" class="" name="description" id="description"></textarea></td>
										</tr>
										<tr>
											<td class="font-semibold" style="background: rgb(221, 221, 221); font-size: 14px;; padding: 20px !important; border: 1px solid black; border-image: none; width: 800px; height: 22px; text-align: left; vertical-align: middle;" colspan="2">
												1. 연차의 사용은 근로기준법에 따라 전년도에 발생한 개인별 잔여 연차에 한하여 사용함을 원칙으로 한다.<br />&nbsp;&nbsp;&nbsp;&nbsp;단, 최초 입사시에는 근로 기준법에 따라 발생 예정된 연차를 차용하여 월 1회 사용 할 수 있다.<br />
												2. 경조사 휴가는 행사일을 증명할 수 있는 가족 관계 증명서 또는 등본, 청첩장 등 제출<br />3. 공가(예비군/민방위)는 사전에 통지서를, 사후에 참석증을 반드시 제출
											</td>
										</tr>
									</tbody>
								</table>
							</form>
						</div>
						<!-- BEGIN : 결재선 정보 -->
						<div class="box ml-2 w-40 border-t border-b border-r border-l border-slate-200 text-center justify-center items-center">
							<div class="items-center text-center font-extrabold text-lg border-b border-slate-200 bg-slate-100 h-12 pt-2 pb-2">결재선 정보</div>
							<div id="atrz_line_profile">
								<!-- 결재선 프로필 정보 -->
<!-- 								<div class="text-center items-center justify-center mt-4 pb-1 zoom-in"> -->
<!--                                     <div class="w-20 h-20 image-fit text-center justify-center items-center ml-auto mr-auto"> -->
<!--                                         <img alt="프로필 이미지" class="rounded-full" data-action="zoom" src="/resources/images/blank_profile.png"> -->
<!--                                     </div> -->
<!-- 	                                <div class="text-center justify-center mt-3 mb-1"> -->
<!-- 	                                    <a id="empNm" href="#" class="font-bold" style="font-size: 18px;">이덕화</a> -->
<!-- 	                                    <div id="deptJbgd" class="font-semibold mt-1" style="font-size: 16px;">관리소장</div> -->
<!-- 	                                </div> -->
<!-- 	                            </div> -->
							</div>
						</div>
						<!-- END : 결재선 정보 -->
					</div>
					<!-- BEGIN : 파일 업로드 -->
					<div id="attachView" class="box mt-2 p-2">
						<div class="w-full flex-1 border-2 border-dashed rounded-md pt-4" style="height: 175px;">
					        <div id="fileShow" class="grid grid-cols-6 gap-20 pl-4 pr-5 h-28">
					        </div>
					        <div class="mt-2 flex items-center justify-center cursor-pointer h-10"><label class="cursor-pointer flex w-full h-10" for="fileUpload">
					            <input id="fileUpload" type="file" name="file" class="relative opacity-0 cursor-pointer mr-36">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="file-plus" class="lucide lucide-file-plus mr-2" data-lucide="file-plus"><path d="M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></svg>
						        <span class="text-primary mr-1 text-xl font-semibold">파일 업로드</span></label>
					        </div>
					    </div>
					</div>
				    <!-- END : 파일 업로드 -->
				</div>
				<!-- BEGIN : 툴바 -->
				<div class="tool_bar flex font-semibold text-lg w-full items-center border-t border-slate-300 pt-2 mt-3">
					<div class="flex items-center">
						<a id="act_draft" class="btn_tool flex mr-7 items-center zoom-in" data-role="button">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="edit" data-lucide="edit" class="lucide lucide-edit block mx-auto"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
							<span class="txt ml-1">결재요청</span>
						</a>
						<a id="act_temp_save" class="btn_tool flex mr-7 items-center zoom-in" data-role="button">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="save" data-lucide="save" class="lucide lucide-save block mx-auto"><path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
							<span class="txt ml-1">임시저장</span>
						</a>
						<a id="act_document_preview" class="btn_tool flex mr-7 items-center zoom-in" data-role="button">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="eye" data-lucide="eye" class="lucide lucide-eye block mx-auto"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
							<span class="txt ml-1">미리보기</span>
						</a>
						<a id="act_cancel_draft" class="btn_tool flex mr-7 items-center zoom-in" data-role="button">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="x-circle" data-lucide="x-circle" class="lucide lucide-x-circle block mx-auto"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
							<span class="txt ml-1">취소</span>
						</a>
						<a id="act_edit_apprflow" data-tw-toggle="modal" data-tw-target="#selectAtrzLine" class="btn_tool flex items-center zoom-in" data-role="button">
							<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
							<span class="txt ml-1">결재정보</span>
						</a>
					</div>
					<div class="optional flex ml-auto items-center">
						<a id="act_list" href="/emp/atrz/mydoc" class="btn_tool flex items-center mr-3 zoom-in" data-role="button">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="align-justify" data-lucide="align-justify" class="lucide lucide-align-justify block mx-auto"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
							<span class="txt ml-1">목록</span>
						</a>
						<select id="autoSaveSelect" class="form-control pl-2 w-40 h-9 text-lg">
							<option value="0" selected="selected">자동저장 안함</option>
							<option value="30">자동저장 (30초)</option>
							<option value="60">자동저장 (1분)</option>
							<option value="180">자동저장 (3분)</option>
						</select>
					</div>
				</div>
				<!-- END : 툴바 -->
			</section>
		</div>
	</div>
</div>

</div>
<!-- END: Body -->

<!-- BEGIN: Modal -->
<div id="selectAtrzLine" class="modal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="width: 750px; height: 577px;">
            <div class="modal-body p-5 text-center justify-center">
				<div class="text-2xl font-bold mt-1 justify-center">결재 정보</div>
				<div class="flex">
					<div class="mt-4 box p-4 pb-0 bg-slate-200 justify-center" style="height: 490px;width: 240px">
						<div class="flex w-full mt-0 h-10 items-center">
					        <div class="w-56 relative text-slate-500 mr-2">
					            <input id="jstree_search" type="text" name="keyword" class="form-control w-56 box pr-10 font-semibold h-9" placeholder="검색" style="font-size: 16px;">
					            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="search" class="lucide lucide-search w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0" data-lucide="search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
					        </div>
					    </div>
					    <div class="flex" style="width: 110%;">
							<div class="mt-3 mr-0 pr-56" style="width: 10%;">
								<div id="jstree" class="font-semibold text-lg"></div>
							</div>
					    </div>
					</div>
					<div style="max-height: 450px; overflow: auto;">
						<table id="tbl_atrz_line" class="table mt-4 ml-2 font-semibold text-center text-lg" style="width: 465px;max-height: 600px;">
							<thead class="table-light bg-slate-200" style="font-weight: bold;">
							    <tr>
							        <th class="bg-slate-200">순서</th>
							        <th class="bg-slate-200 w-20">구분</th>
							        <th class="bg-slate-200 w-32">결재자</th>
							        <th class="bg-slate-200 w-36">직책</th>
							        <th class="bg-slate-200">삭제</th>
							    </tr>
							</thead>
							<tbody id="tbd">
<!-- 							    <tr class="atrz_line_info"> -->
<!-- 							        <td>1</td> -->
<!-- 							        <td> -->
<!-- 										<select class="form-control h-10 w-20 text-lg pl-2" name="select_type"> -->
<!-- 											<option value="결재">결재</option> -->
<!-- 											<option value="합의">합의</option> -->
<!-- 											<option value="참조">참조</option> -->
<!-- 										</select> -->
<!-- 							        </td> -->
<!-- 							        <td>이덕화</td> -->
<!-- 							        <td>관리소장</td> -->
<!-- 							        <td> -->
<!-- 							        	<svg class="atrz-line-del cursor-pointer ml-auto mr-auto" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="trash-2" data-lucide="trash-2" class="lucide lucide-trash-2 block mx-auto"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg> -->
<!-- 							        </td> -->
<!-- 							    </tr> -->
							</tbody>
						</table>
				    </div>
						<div class="text-lg font-bold text-right mr-1 absolute bottom-5 right-5">
							<a id="btnConfirm" class="btn btn-primary font-bold h-11" style="width: 65px;"> 확인 </a>
							<a id="btnCancle" class="btn btn-outline-danger font-bold ml-1 h-11" style="width: 65px;"> 취소 </a>
						</div>
					</div>
				</div>
            </div>
        </div>
    </div>
</div>
<!-- END: Modal -->

<!-- <script type="text/javascript" src="/resources/js/jquery-3.6.4.min.js"></script> -->
<script type="text/javascript" src="/resources/ckeditor/ckeditor.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- 조직도 트리 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>
<!-- jsPDF -->
<script type="text/javascript" src="/resources/js/html2canvas.js"></script>
<script type="text/javascript" src="/resources/js/jspdf.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" integrity="sha512-aOG0c6nPNzGk+5zjwyJaoRUgCdOrfSDhmMID2u4+OIslr0GjpLKo7Xm0Ao3xmpM4T8AmIouRkqwj1nrdVsLKEQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
<link rel="stylesheet" href="/resources/icewall/dist/css/datepicker.css">
<style type="text/css">
@media print {
	.main {
		padding: 0;
	}
	#doc {
	  margin-left: 0;
	  align-content: flex-start;
	  justify-content: flex-start;
	}
}
@page {
	size : auto;
	margin-left : 0mm;
	padding-left: 0mm;
}
#j1_1_anchor, #j1_3_anchor, #j1_8_anchor, #j1_13_anchor {
	font-weight: bolder;
}
#tbl_atrz_line th {
	padding-left: 0px;
	padding-right: 0px;
	font-weight: bolder;
}
#tbl_atrz_line td {
	padding: 1px;
	height: 50px;
}
#tbd {
	overflow: hidden;
}
.atrz_line_info {
	overflow: auto;
}
</style>
<script>
	// CKEDITOR 설정
	CKEDITOR.replace("editor");  // textarea의 name 값 입력
	// html 태그 사라지는 오류 해결
	CKEDITOR.config.allowedContent = true;
	// 입력란 활성화
	CKEDITOR.instances["editor"].setReadOnly(false);
</script>
<script type="text/javascript">
let $j = jQuery.noConflict();
$j.datepicker.setDefaults({
	dateFormat: 'yy-mm-dd (D)',
	prevText: '이전 달',
	nextText: '다음 달',
	monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
	monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
	dayNames: ['일', '월', '화', '수', '목', '금', '토'],
	dayNamesShort: ['일', '월', '화', '수', '목', '금', '토'],
	dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
	showMonthAfterYear: true,
	yearSuffix: '년'
});

$(function(){
	$("#main_menu").html("전자결재");
	$("#sub_menu").html("내 문서함");

	$(".side-nav > ul > li > .side-menu").on("click", function(){
		// 좌측 메뉴 선택 시 효과 적용
		$(".side-menu").removeClass("side-menu--active");
		$(this).addClass("side-menu--active");

		// 메뉴 경로 표시 (좌측 메뉴)
		var sub = $(this).find(".side-menu__title").text();
		console.log(sub.trim());
		$("#sub_menu").html(sub.trim());
	});

	// 연차 기간, 일수 계산
	let startDate = "";
	let endDate = "";
	let usingPoint = "";  // 신청연차 (사용일수)
	let restPoint = 10;   // 잔여연차

	// 잔여연차
	$("#restPoint").val(restPoint);

	// 시작일 선택 이벤트 핸들러
	$j("#startDate").datepicker({
		onSelect : function(dateText, inst) {
			startDate = dateText.replace(/[-()]/g, "").substring(0, 8);
			console.log("startDate : ", startDate);
		}
	});

	// 종료일 선택 이벤트 핸들러
	$j("#endDate").datepicker({
		onSelect : function(dateText, inst) {
			endDate = dateText.replace(/[-()]/g, "").substring(0, 8);
			console.log("endDate : ", endDate);
			usingPoint = endDate - startDate + 1;
			$("#usingPoint_Comment").html("");
			$("#usingPoint").val(usingPoint);
			$("#applyPoint").val(usingPoint);

			if (endDate < startDate) {
				$("#usingPoint_Comment").html("종료일은 시작일 이후로 설정해주세요");
				$("#endDate").val("");
				$("#usingPoint").val("");
				$("#applyPoint").val("");
			}

			if (usingPoint > restPoint) {
				$("#usingPoint_Comment").html("신청가능일을 초과하였습니다");
			}
		}
	});

	// 미리보기 버튼 이벤트 핸들러 (PDF 프린트)
	 $("#act_document_preview").on("click", previewAndPrint);

	// 부서 조직도 트리
	let $jQ = jQuery.noConflict();

	//데이터 변환
	const nodes = ${json};
	console.log(${json});
	const data = [];

	// parent를 기준으로 데이터 정리
	const parents = {};
	nodes.forEach(node => {
		if (!parents[node.parent]) {
			parents[node.parent] = [];
		}
		parents[node.parent].push(node.child);
	});

	console.log("parents : ", parents);
	// jstree에서 사용할 수 있는 형태로 데이터 변환
	Object.keys(parents).forEach(parent => {
		const children = parents[parent].map(child => {
			return {text : child, type : "emp"};
		});
		data.push({
			text : parent,
			children : children
		});
	});
	// 부서별 직급순서 처리
	let temp = data[1];
	data[1] = data[0];
	data[0] = temp;
	for (let i = 1; i < data.length; i++) {
		let temp2 = data[i].children[2];
		data[i].children[2] = data[i].children[0];
		data[i].children[0] = temp2;
	}
	console.log("data : ", data);

	$jQ("#jstree").jstree({
		"core": {
			"check_callback" : true,
			"data" : data
		},
		"types" : {
			"default" : {
				"icon" : "fa fa-square-plus text-primary"
			},
			"emp" : {
				"icon" : "fa-solid fa-user text-warning"
			}
		},
		"plugins" : ["types", "dnd", "search"]
	});

	// 조직도 전체 펼치기
	$("#act_edit_apprflow").on("click", function(){
		$jQ("#jstree").jstree("open_all");
	});

    // 조직도 내 검색 기능
    $("#jstree_search").on("keyup", function () {
		let keyword = $(this).val();
		console.log(keyword);
		$j('#jstree').jstree(true).search(keyword);
    });

    // 취소 버튼 이벤트 핸들러
    $("#btnCancle").on("click", function(){
	   	let modal = tailwind.Modal.getInstance(document.querySelector("#selectAtrzLine"));
	   	modal.hide();
    });

	// 결재 정보창 삭제 버튼 이벤트 핸들러
	$(".atrz-line-del").on("click", function(e){
		$(this).closest("tr").remove();
	});

    // 노드 선택 이벤트 핸들러
	$j("#jstree").on("select_node.jstree", function(e, data) {

	    let cnt = $("#tbd").children("tr").length + 1;

		// 선택된 노드의 id와 텍스트
		let nodeId = data.node.id;
		let nodeText = data.node.text;
		let parentId = data.node.parent;
		let parentText = $j("#jstree").jstree(true).get_node(parentId).text;

		console.log("data : ", data);
		console.log("nodeId : ", nodeId);
		console.log("nodeText : ", nodeText);
		console.log("parentId : ", parentId);
		console.log("parentText : ", parentText);

		if (nodeId == "j1_1" || nodeId == "j1_3" || nodeId == "j1_8" || nodeId == "j1_13") {
			return;
		}

		let	empNm = nodeText.substring(0, 3);
		let position = parentText + " " + nodeText.substring(4);
		if (parentText == nodeText.substring(4)) {
			position = parentText;
		}

		console.log(empNm + position);

		let html_tr = `
            <tr class="atrz_line_info">
	            <td>\${cnt}</td>
	            <td>
					<select class="form-control h-10 w-20 text-lg pl-2" name="select_type">
						<option value="결재">결재</option>
						<option value="합의">합의</option>
						<option value="참조">참조</option>
					</select>
	            </td>
	            <td>\${empNm}</td>
	            <td>\${position}</td>
	            <td>
	            	<svg class="atrz-line-del cursor-pointer ml-auto mr-auto" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="trash-2" data-lucide="trash-2" class="lucide lucide-trash-2 block mx-auto"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
	            </td>
        	</tr>
		`;

		document.querySelector("#tbd").insertAdjacentHTML("beforeend", html_tr);
		$(".atrz-line-del").on("click", function(e){
			$(this).closest("tr").remove();
		});

    });

    // 확인 버튼 이벤트 핸들러
    $("#btnConfirm").on("click", function(){

		let arr_info = $(".atrz_line_info");
		console.log(arr_info);

		let atrz_arr_name = [];
		let atrz_arr_position = [];
		let agree_arr_name = [];
		let agree_arr_position = [];
		let profile_arr_name = [];
		let profile_arr_position = [];

		for (let i = 0; i < arr_info.length; i++) {
			console.log($(arr_info[i]).children()[1]);

			let type = $(arr_info[i]).find("select")[0].value;
			let name = $($(arr_info[i]).children()[2]).html();
			let position = $($(arr_info[i]).children()[3]).html();

			// 결재선 프로필 정보
			profile_arr_name.push(name);
			profile_arr_position.push(position);

			if (position.length > 4) {
				position = position.substring(position.length - 2);
			}
			console.log(type, name, position);

			if (type == "결재") {
				// 결재 테이블 정보
				atrz_arr_name.push(name);
				atrz_arr_position.push(position);
			} else if (type == "합의") {
				// 합의 테이블 정보
				agree_arr_name.push(name);
				agree_arr_position.push(position);
			}
		}
		console.log("결재", atrz_arr_name, atrz_arr_position);
		console.log("합의", agree_arr_name, agree_arr_position);

		if (atrz_arr_name.length > 0) {
			// 결재선(결재) 생성
			makeAtrzTable("결재", atrz_arr_name, atrz_arr_position);
		}
		if (agree_arr_name.length > 0) {
			// 결재선(합의) 생성
			makeAtrzTable("합의", agree_arr_name, agree_arr_position);
		}
		// 결재선 정보 프로필 생성
		makeAtrzProfile(profile_arr_name, profile_arr_position);

	   	let modal = tailwind.Modal.getInstance(document.querySelector("#selectAtrzLine"));
	   	modal.hide();
    });

    // 결재 취소 버튼 이벤트 핸들러
    $("#act_cancel_draft").on("click", function(){
    	$("#atrz_line").html("");
    	$("#atrz_line_profile").html("");
    	$("#startDate").val("");
    	$("#endDate").val("");
    	$("#usingPoint").val("");
    	$("#restPoint").val("");
    	$("#applyPoint").val("");
    	$("#applyPoint").val("");
    	$("#fileUpload").val("");
    	$("#fileShow").html("");
    	$("#usingPoint_Comment").val("");
    	$("input[type='checkbox']").prop("checked", false);
    	$("input[type='radio']").prop("checked", false);
    	CKEDITOR.instances.editor.setData("");
    });

    // 반차 여부 - 시작일 버튼 이벤트 핸들러


});

// 미리보기, 출력 기능
function previewAndPrint() {
    let printContents = $("#doc").html();
    let originalContents = $("body").html();

    $("body").html(printContents);
    $(".main").css("padding-left", "0");
    window.print();

    $("body").html(originalContents);
    $(".main").css("padding-left", "15%");
    $("#act_document_preview").on("click", previewAndPrint);
}

// 결재선 테이블 생성 함수
function makeAtrzTable(type, arr_name, arr_position) {

	let html = `
		<table class="__se_tbl text-center" style="height: 156px; background: white; margin: 0px; margin-left: 5px; border: 1px solid black; border-image: none; color: black; font-size: 16px; border-collapse: collapse !important;">
			<tbody>
				<tr id="atrz_line_tr_\${type}_1">
					<td rowspan="3" class="font-semibold" style="width: 27px; border: 1px solid black; background: rgb(221, 221, 221); font-size: 16px;">\${type}</td>
					<td style="height: 35px; width: 87px; border: 1px solid black;">\${arr_position[0]}</td>
				</tr>
				<tr id="atrz_line_tr_\${type}_2">
					<td style="height: 85px; width: 87px; border: 1px solid black;">\${arr_name[0]}</td>
				</tr>
				<tr id="atrz_line_tr_\${type}_3">
					<td style="height: 35px; width: 87px; border: 1px solid black;"></td>
				</tr>
			</tbody>
		</table>
	`;
	$("#atrz_line").append(html);

	// 결재자가 2명 이상일 경우 td 요소 추가
	if (arr_name.length > 1) {
		for (let i = 1; i < arr_name.length; i++) {
			document.getElementById(`atrz_line_tr_\${type}_1`).insertAdjacentHTML("beforeend", `<td style="height: 35px; width: 87px; border: 1px solid black;">\${arr_position[i]}</td>`);
			document.getElementById(`atrz_line_tr_\${type}_2`).insertAdjacentHTML("beforeend", `<td style="height: 85px; width: 87px; border: 1px solid black;">\${arr_name[i]}</td>`);
			document.getElementById(`atrz_line_tr_\${type}_3`).insertAdjacentHTML("beforeend", `<td style="height: 35px; width: 87px; border: 1px solid black;"></td>`);
		}
	}
}

// 결재 프로필 생성 함수
function makeAtrzProfile(arr_name, profile_arr_position) {

	for (let i = 0; i < arr_name.length; i++) {

		let html = `
			<div class="text-center items-center justify-center mt-4 pb-1 zoom-in">
		        <div class="w-20 h-20 image-fit text-center justify-center items-center ml-auto mr-auto">
		            <img alt="프로필 이미지" class="rounded-full" data-action="zoom" src="/resources/images/blank_profile.png">
		        </div>
		        <div class="text-center justify-center mt-3 mb-1">
		            <a id="empNm" href="#" class="font-bold" style="font-size: 18px;">\${arr_name[i]}</a>
		            <div id="deptJbgd" class="font-semibold mt-1" style="font-size: 16px;">\${profile_arr_position[i]}</div>
		        </div>
		    </div>
		`;
		$("#atrz_line_profile").append(html);
	}
}

</script>






















